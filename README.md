# Regex ตรวจมาตรฐานการสะกดภาษาไทย

โปรเจกต์เล็กๆ สำหรับรวบรวม Regular Expression ที่ใช้ตรวจรูปคำภาษาไทยขั้นพื้นฐาน (โครงสร้างสระ–วรรณยุกต์–ตัวสะกด) จากกฎไวยากรณ์ไทยเบื้องต้น ไม่ได้เช็กความหมายของคำ แต่ช่วยจับรูปเขียนที่ "ไม่น่าเป็นไปได้" ตามกฎการสะกด

## แนวคิด

อาศัยลักษณะเฉพาะของภาษาไทย เช่น
- สระหน้า (เ แ โ ไ ใ) ต้องมีพยัญชนะตาม
- สระบน/ล่าง ต้องมีพยัญชนะรองรับ
- ไม้หันอากาศ และวรรณยุกต์ ต้องวางตำแหน่งถูกต้อง
- ห้ามมีสระ/วรรณยุกต์/ทัณฑฆาตซ้ำซ้อน
- ลำดับของสระ–วรรณยุกต์ ต้องไม่สลับกัน

แล้วเขียนเป็น regex เพื่อ "จับตำแหน่งที่ผิดรูป" ในสตริงภาษาไทย

## ขอบเขตที่ตรวจได้

จากไฟล์ [regex.md](regex.md) จะมี regex ย่อยๆ สำหรับกรณีต่อไปนี้:

### รูปสระและวรรณยุกต์ในภาษาไทย
- **สระหน้า**: เ แ โ ไ ใ
- **สระบน**: อิ อี อึ อื อั อ็
- **สระล่าง**: อุ อู
- **สระหลัง**: า ะ ำ
- **วรรณยุกต์**: อ่ อ้ อ๊ อ๋
- **ตัวการันต์**: ค์

### กฎการตรวจสอบ

#### 1. ตรวจสระซ้ำซ้อน
```regex
[เแโไใ]{2,}
```
- จับสระหน้าซ้ำซ้อน เช่น "กาาแฟ"

```regex
[ิีึืูุั็]{2,}
```
- จับสระบน/ล่าง และไม้หันอากาศซ้ำซ้อน เช่น "กลิ่ิน"

```regex
[่้๊๋]{2,}
```
- จับวรรณยุกต์ซ้ำซ้อน เช่น "ร้้อน"

```regex
[์]{2,}
```
- จับทัณฑฆาตซ้ำซ้อน

#### 2. ลำดับสระและวรรณยุกต์
```regex
[่้๊๋][ิีึืุูั็]
```
- จับกรณีที่วรรณยุกต์มาก่อนสระบน/ล่าง (ผิดลำดับ) เช่น "ก้ิน"

#### 3. สระหน้าตามด้วยสระอื่นทันที
```regex
[เแโไใ][ิีึืุูั็าะำ]
```
- จับสระหน้าแล้วตามด้วยสระบน/ล่าง/หลังทันที เช่น "เิดิน"

#### 4. ทัณฑฆาตที่ไม่มีพยัญชนะ
```regex
(?<![ก-ฮ][ิุ]?)(?:์)
```
- จับทัณฑฆาตที่ไม่มีพยัญชนะนำหน้า

#### 5. ไม้หันอากาศที่ไม่มีพยัญชนะ
```regex
(?<![ก-ฮ])(?:ั)
```
- จับไม้หันอากาศ (สระอะเปลี่ยนรูป) ที่ไม่มีพยัญชนะนำหน้า

#### 6. ไม้หันอากาศที่ไม่มีตัวสะกด
```regex
(?:ั)(?![่้๊๋]?(?:(?![ผฝหอฮฉฌรฃฅ])[ก-ฮ]))
```
- จับไม้หันอากาศที่ไม่มีตัวสะกดตามหลัง (ยกเว้นพยัญชนะที่ไม่ใช่ตัวสะกด)

#### 7. วรรณยุกต์ที่ไม่มีพยัญชนะ
```regex
(?<![ก-ฮ][ิีืึุูั]?)[่้๊๋]
```
- จับวรรณยุกต์ที่ไม่มีพยัญชนะนำหน้า หรือถ้ามีสระบน/ล่างไม่อยู่ก่อนวรรณยุกต์

#### 8. สระหน้าที่ไม่มีพยัญชนะตามท้าย
```regex
[เแไโใ](?![ก-ฮ])
```
- จับสระหน้าที่ไม่ตามด้วยพยัญชนะ

#### 9. สระนำหน้าที่ไม่ควรมีสระอื่น
```regex
[ไโใ][ก-ฮ][่้๊๋]?[ิีึืุูำั็า์]
```
- สระ ไ โ ใ ตามด้วยพยัญชนะที่มีสระ อิ อี อึ อื อุ อู อำ อา ไม้หันอากาศ ไม้ไต่คู้ หรือการันต์

```regex
แ[ก-ฮ][่้๊๋]?[ีืึิุูำัา์]
```
- สระ แ ตามด้วยพยัญชนะที่มีสระ อี อื อึ อิ อุ อู อำ อา ไม้หันอากาศ หรือการันต์

```regex
เ[ก-ฮ][่้๊๋]?[ึุูำั์]
```
- สระ เ ตามด้วยพยัญชนะที่มีสระ อึ อุ อู อำ ไม้หันอากาศ หรือการันต์

## Regex ที่ได้

### เวอร์ชันทั่วไป

ใช้ตรวจการสะกดตามกฎปกติ (ไม่อนุญาตการลากเสียง เช่น อ้าาา)

```regex
[เแโไใ]{2,}|[ิีึืูุั็]{2,}|[่้๊๋]{2,}|[์]{2,}|[่้๊๋][ิีึืุูั็]|[เแโไใ][ิีึืุูั็าะำ]|(?<![ก-ฮ][ิุ]?)(?:์)|(?<![ก-ฮ])(?:ั)|(?:ั)(?![่้๊๋]?(?:(?![ผฝหอฮฉฌรฃฅ])[ก-ฮ]))|(?<![ก-ฮ][ิีืึุูั]?)[่้๊๋]|[เแไโใ](?![ก-ฮ])|[ไโใ][ก-ฮ][่้๊๋]?[ิีึืุูำั็า์]|แ[ก-ฮ][่้๊๋]?[ีืึิุูำัา์]|เ[ก-ฮ][่้๊๋]?[ึุูำั์]|แ[ก-ฮ]็(?![ก-ฮ])|(?<![ก-ฮ][่้๊๋]?)[ิีึืุูำำ]|(?<!เ[ก-ฮ]{1,2}[่้๊๋]?[าอ]|[โเแ]?[ก-ฮ]{1,2}[่้๊๋]?)ะ|(?<!เ?[ก-ฮ]{1,2}[่้๊๋]?)า|เ(?![ก-ฮ])|เ[ก-ฮ](?:ี(?![่้๊๋]?ย[ก-ฮ]?)|ื(?![่้๊๋]?อ[ก-ฮ]?))|[ื](?![่้๊๋]?[ก-ฮ](?![ะาิีึืุูำั็่้๊๋]))|(?:[แเโไใ][ก-ฮ]|[ก-ฮ][ิีึืุูาะ])ำ
```

### เวอร์ชันทั่วไปที่อนุญาตการลากเสียง (เช่น "อ้าาาา")

ต่างจากเวอร์ชันทั่วไปตรงเงื่อนไขของสระอา เพื่อให้ยอมรับการย้ำ "า" ต่อท้ายได้

```regex
[เแโไใ]{2,}|[ิีึืูุั็]{2,}|[่้๊๋]{2,}|[์]{2,}|[่้๊๋][ิีึืุูั็]|[เแโไใ][ิีึืุูั็าะำ]|(?<![ก-ฮ][ิุ]?)(?:์)|(?<![ก-ฮ])(?:ั)|(?:ั)(?![่้๊๋]?(?:(?![ผฝหอฮฉฌรฃฅ])[ก-ฮ]))|(?<![ก-ฮ][ิีืึุูั]?)[่้๊๋]|[เแไโใ](?![ก-ฮ])|[ไโใ][ก-ฮ][่้๊๋]?[ิีึืุูำั็า์]|แ[ก-ฮ][่้๊๋]?[ีืึิุูำัา์]|เ[ก-ฮ][่้๊๋]?[ึุูำั์]|แ[ก-ฮ]็(?![ก-ฮ])|(?<![ก-ฮ][่้๊๋]?)[ิีึืุูำำ]|(?<!เ[ก-ฮ]{1,2}[่้๊๋]?[าอ]|[โเแ]?[ก-ฮ]{1,2}[่้๊๋]?)ะ|(?<!เ?[ก-ฮ]{1,2}[่้๊๋]?|า)า|เ(?![ก-ฮ])|เ[ก-ฮ](?:ี(?![่้๊๋]?ย[ก-ฮ]?)|ื(?![่้๊๋]?อ[ก-ฮ]?))|[ื](?![่้๊๋]?[ก-ฮ](?![ะาิีึืุูำั็่้๊๋]))|(?:[แเโไใ][ก-ฮ]|[ก-ฮ][ิีึืุูาะ])ำ
```


### เวอร์ชันเพิ่มเติม

ใช้ตรวจการสะกดตามกฎปกติ (ไม่อนุญาตการลากเสียง เช่น อ้าาา) และเพิ่มกฎพิเศษ (อย่าอยู่อย่างอยาก)

```regex
[เแโไใ]{2,}|[ิีึืูุั็]{2,}|[่้๊๋]{2,}|[์]{2,}|[่้๊๋][ิีึืุูั็]|[เแโไใ][ิีึืุูั็าะำ]|(?<![ก-ฮ][ิุ]?)(?:์)|(?<![ก-ฮ])(?:ั)|(?:ั)(?![่้๊๋]?(?:(?![ผฝหอฮฉฌรฃฅ])[ก-ฮ]))|(?<![ก-ฮ][ิีืึุูั]?)[่้๊๋]|[เแไโใ](?![ก-ฮ])|[ไโใ][ก-ฮ][่้๊๋]?[ิีึืุูำั็า์]|แ[ก-ฮ][่้๊๋]?[ีืึิุูำัา์]|เ[ก-ฮ][่้๊๋]?[ึุูำั์]|แ[ก-ฮ]็(?![ก-ฮ])|(?<![ก-ฮ][่้๊๋]?)[ิีึืุูำำ]|(?<!เ[ก-ฮ]{1,2}[่้๊๋]?[าอ]|[โเแ]?[ก-ฮ]{1,2}[่้๊๋]?)ะ|(?<!เ?[ก-ฮ]{1,2}[่้๊๋]?)า|เ(?![ก-ฮ])|เ[ก-ฮ](?:ี(?![่้๊๋]?ย[ก-ฮ]?)|ื(?![่้๊๋]?อ[ก-ฮ]?))|[ื](?![่้๊๋]?[ก-ฮ](?![ะาิีึืุูำั็่้๊๋]))|(?:[แเโไใ][ก-ฮ]|[ก-ฮ][ิีึืุูาะ])ำ|(?<![เแไใโ][ก-ฮ]?)[ก-ฮ](?![ิีึืุู])[่้๊๋](?!(?:[ะำา]|[อว][ก-ฮ]?|[ก-ฮ](?![ะาิีึืุูำั็่้๊๋])))|เ[ก-ฮ]{1,2}(?:ิ(?![่้๊๋]?[ก-ฮ](?![ะาิีึืุูำั็่้๊๋]))|็(?![ก-ฮ](?![ะาิีึืุูำั็่้๊๋])))|(?<![เแไโใอว][ก-ฮ]?[่้๊๋]?|[ิีึืุูั][่้๊๋]?)[ก-ฮ]{1,2}[่้๊๋]?ว(?<![อน]ว)(?![่้๊๋ะาิีึือัโไใ์]|[ก-ฮ](?![ั่้๊๋ิีืึุูะาำอ]))|(?<!เ?(?:[ก-ฮ]{1,2}(?:ื?[่้๊๋็]?)?)|[เแโ])(?:อย(?!่า|ู่|าก)|อย(?:่ง|่(?!า)))
```

### เวอร์ชันเพิ่มเติมที่อนุญาตการลากเสียง (เช่น "อ้าาาา")

ต่างจากเวอร์ชันทั่วไปตรงเงื่อนไขของสระอา เพื่อให้ยอมรับการย้ำ "า" ต่อท้ายได้ และเพิ่มกฎพิเศษ

```regex
[เแโไใ]{2,}|[ิีึืูุั็]{2,}|[่้๊๋]{2,}|[์]{2,}|[่้๊๋][ิีึืุูั็]|[เแโไใ][ิีึืุูั็าะำ]|(?<![ก-ฮ][ิุ]?)(?:์)|(?<![ก-ฮ])(?:ั)|(?:ั)(?![่้๊๋]?(?:(?![ผฝหอฮฉฌรฃฅ])[ก-ฮ]))|(?<![ก-ฮ][ิีืึุูั]?)[่้๊๋]|[เแไโใ](?![ก-ฮ])|[ไโใ][ก-ฮ][่้๊๋]?[ิีึืุูำั็า์]|แ[ก-ฮ][่้๊๋]?[ีืึิุูำัา์]|เ[ก-ฮ][่้๊๋]?[ึุูำั์]|แ[ก-ฮ]็(?![ก-ฮ])|(?<![ก-ฮ][่้๊๋]?)[ิีึืุูำำ]|(?<!เ[ก-ฮ]{1,2}[่้๊๋]?[าอ]|[โเแ]?[ก-ฮ]{1,2}[่้๊๋]?)ะ|(?<!เ?[ก-ฮ]{1,2}[่้๊๋]?|า)า|เ(?![ก-ฮ])|เ[ก-ฮ](?:ี(?![่้๊๋]?ย[ก-ฮ]?)|ื(?![่้๊๋]?อ[ก-ฮ]?))|[ื](?![่้๊๋]?[ก-ฮ](?![ะาิีึืุูำั็่้๊๋]))|(?:[แเโไใ][ก-ฮ]|[ก-ฮ][ิีึืุูาะ])ำ|(?<![เแไใโ][ก-ฮ]?)[ก-ฮ](?![ิีึืุู])[่้๊๋](?!(?:[ะำา]|[อว][ก-ฮ]?|[ก-ฮ](?![ะาิีึืุูำั็่้๊๋])))|เ[ก-ฮ]{1,2}(?:ิ(?![่้๊๋]?[ก-ฮ](?![ะาิีึืุูำั็่้๊๋]))|็(?![ก-ฮ](?![ะาิีึืุูำั็่้๊๋])))|(?<![เแไโใอว][ก-ฮ]?[่้๊๋]?|[ิีึืุูั][่้๊๋]?)[ก-ฮ]{1,2}[่้๊๋]?ว(?<![อน]ว)(?![่้๊๋ะาิีึือัโไใ์]|[ก-ฮ](?![ั่้๊๋ิีืึุูะาำอ]))|(?<!เ?(?:[ก-ฮ]{1,2}(?:ื?[่้๊๋็]?)?)|[เแโ])(?:อย(?!่า|ู่|าก)|อย(?:่ง|่(?!า)))
```

### เวอร์ชั่นรองรับตัวการันต์
```regex
[เแโไใ]{2,}|[ิีึืูุั็]{2,}|[่้๊๋]{2,}|[์]{2,}|[่้๊๋][ิีึืุูั็]|[เแโไใ][ิีึืุูั็าะำ]|(?<![ก-ฮ][ิุ]?)(?:์)|(?<![ก-ฮ])(?:ั)|(?:ั)(?![่้๊๋]?(?:(?![ผฝหอฮฉฌรฃฅ])[ก-ฮ])(?!(ิ)?์))|(?<![ก-ฮ][ิีืึุูั]?)[่้๊๋]|[เแไโใ](?![ก-ฮ])|[ไโใ][ก-ฮ][่้๊๋]?[ิีึืุูำั็า์]|แ[ก-ฮ][่้๊๋]?[ีืึิุูำัา์]|เ[ก-ฮ][่้๊๋]?[ึุูำั์]|แ[ก-ฮ]็(?![ก-ฮ](?![ะาิีึืุูำั็่้๊๋์])|[ก-ฮ][ก-ฮ](?:[ิ]?์))|(?<![ก-ฮ][่้๊๋]?)[ิีึืุูำำ]|(?<!เ[ก-ฮ]{1,2}[่้๊๋]?[าอ]|[โเแ]?[ก-ฮ]{1,2}[่้๊๋]?)ะ|(?<!เ?[ก-ฮ]{1,2}[่้๊๋]?)า|เ(?![ก-ฮ])|เ[ก-ฮ](?:ี(?![่้๊๋]?ย[ก-ฮ]?)|ื(?![่้๊๋]?อ[ก-ฮ]?))|[ื](?![่้๊๋]?[ก-ฮ](?![ะาิีึืุูำั็่้๊๋]))|(?:[แเโไใ][ก-ฮ]|[ก-ฮ][ิีึืุูาะ])ำ|(?<![เแไใโ][ก-ฮ]?)[ก-ฮ](?![ิีึืุู])[่้๊๋](?!(?:[ะำา]|[อว][ก-ฮ]?|[ก-ฮ](?![ะาิีึืุูำั็่้๊๋])))|เ(?:ส[กตวฟปร]|[ก-ฮ])ิ[่้๊๋]?(?:[ก-ฮ]์)?(?![่้๊๋]?[ก-ฮ](?![ะาิีึืุูำั็่้๊๋]))|เ(?:[กขคจตปพผทซศสดบฟหอ]ร|[กขคปพผบฟหขฉถสต]ล|ส[กตวฟป]|[ก-ฮ])็(?![ก-ฮ](?![ะาิีึืุูำั็่้๊๋์])|[ก-ฮ][ก-ฮ]์)|(?<![เแไโใอว][ก-ฮ]?[่้๊๋]?|[ิีึืุูั][่้๊๋]?)[ก-ฮ]{1,2}[่้๊๋]?ว(?<![อน]ว)(?![่้๊๋ะาิีึือัโไใ์]|[ก-ฮ](?![ั่้๊๋ิีืึุูะาำอ]))|(?<!เ?(?:[ก-ฮ]{1,2}(?:ื?[่้๊๋็]?)?)|[เแโ])(?:อย(?!่า|ู่|าก)|อย(?:่ง|่(?!า)))
```


### เวอร์ชั่นรองรับตัวการันต์และอนุญาตการใช้เสียงยาว เช่น อาาาา
```regex
[เแโไใ]{2,}|[ิีึืูุั็]{2,}|[่้๊๋]{2,}|[์]{2,}|[่้๊๋][ิีึืุูั็]|[เแโไใ][ิีึืุูั็าะำ]|(?<![ก-ฮ][ิุ]?)(?:์)|(?<![ก-ฮ])(?:ั)|(?:ั)(?![่้๊๋]?(?:(?![ผฝหอฮฉฌรฃฅ])[ก-ฮ])(?!(ิ)?์))|(?<![ก-ฮ][ิีืึุูั]?)[่้๊๋]|[เแไโใ](?![ก-ฮ])|[ไโใ][ก-ฮ][่้๊๋]?[ิีึืุูำั็า์]|แ[ก-ฮ][่้๊๋]?[ีืึิุูำัา์]|เ[ก-ฮ][่้๊๋]?[ึุูำั์]|แ[ก-ฮ]็(?![ก-ฮ](?![ะาิีึืุูำั็่้๊๋์])|[ก-ฮ][ก-ฮ](?:[ิ]?์))|(?<![ก-ฮ][่้๊๋]?)[ิีึืุูำำ]|(?<!เ[ก-ฮ]{1,2}[่้๊๋]?[าอ]|[โเแ]?[ก-ฮ]{1,2}[่้๊๋]?)ะ|(?<!เ?[ก-ฮ]{1,2}[่้๊๋]?|า)า|เ(?![ก-ฮ])|เ[ก-ฮ](?:ี(?![่้๊๋]?ย[ก-ฮ]?)|ื(?![่้๊๋]?อ[ก-ฮ]?))|[ื](?![่้๊๋]?[ก-ฮ](?![ะาิีึืุูำั็่้๊๋]))|(?:[แเโไใ][ก-ฮ]|[ก-ฮ][ิีึืุูาะ])ำ|(?<![เแไใโ][ก-ฮ]?)[ก-ฮ](?![ิีึืุู])[่้๊๋](?!(?:[ะำา]|[อว][ก-ฮ]?|[ก-ฮ](?![ะาิีึืุูำั็่้๊๋])))|เ(?:ส[กตวฟปร]|[ก-ฮ])ิ[่้๊๋]?(?:[ก-ฮ]์)?(?![่้๊๋]?[ก-ฮ](?![ะาิีึืุูำั็่้๊๋]))|เ(?:[กขคจตปพผทซศสดบฟหอ]ร|[กขคปพผบฟหขฉถสต]ล|ส[กตวฟป]|[ก-ฮ])็(?![ก-ฮ](?![ะาิีึืุูำั็่้๊๋์])|[ก-ฮ][ก-ฮ]์)|(?<![เแไโใอว][ก-ฮ]?[่้๊๋]?|[ิีึืุูั][่้๊๋]?)[ก-ฮ]{1,2}[่้๊๋]?ว(?<![อนว]ว)(?![่้๊๋ะาิีึือัโไใ์]|[ก-ฮ](?![ั่้๊๋ิีืึุูะาำอ]))|(?<!เ?(?:[ก-ฮ]{1,2}(?:ื?[่้๊๋็]?)?)|[เแโ])(?:อย(?!่า|ู่|าก)|อย(?:่ง|่(?!า)))
```



## วิธีใช้งาน

แนวทางทั่วไปคือใช้ regex นี้เพื่อ "หา" ตำแหน่งผิดปกติในสตริงภาษาไทย

ตัวอย่าง (แนวคิด) ในภาษา JavaScript:

```js
const pattern = /[เแโไใ]{2,}|[ิีึืูุั็]{2,}|[่้๊๋]{2,}|[์]{2,}|[่้๊๋][ิีึืุูั็]|[เแโไใ][ิีึืุูั็าะำ]|(?<![ก-ฮ])ั|ั(?![่้๊๋]?[ก-ฮ](?![ะำาิีึืุู่้๊๋์]))|(?<![ก-ฮ][ิีืึุูั]?)[่้๊๋]|[เแไโใ](?![ก-ฮ])|[ไโใ][ก-ฮ][่้๊๋]?[ิีึืุูำั็า์]|แ[ก-ฮ][่้๊๋]?[ีืึิุูำัา์]|เ[ก-ฮ][่้๊๋]?[ึุูำั์]|แ[ก-ฮ]็(?![ก-ฮ])|(?<![ก-ฮ][่้๊๋]?)[ิีึืุูำำ]|(?<!เ[ก-ฮ]{1,2}[่้๊๋]?[าอ]|[โเแ]?[ก-ฮ]{1,2}[่้๊๋]?)ะ|(?<!เ?[ก-ฮ]{1,2}[่้๊๋]?)า|เ(?![ก-ฮ])|เ[ก-ฮ]ี(?![่้๊๋]?ย[ก-ฮ]?)|เ[ก-ฮ]{1,2}ื(?![่้๊๋]?อ[ก-ฮ]?)|เ[ก-ฮ]{1,2}ิ(?![่้๊๋]?[ก-ฮ])|เ[ก-ฮ]{1,2}็(?![ก-ฮ])|[ื](?![่้๊๋]?[ก-ฮ])|(?:[แเโไใ][ก-ฮ]|[ก-ฮ][ิีึืุูาะ])ำ/gu;

const text = "กาาแฟร้้อนๆ มีกลิ่ินหอมฟุ้งไปทั่ัวห้อง";

for (const match of text.matchAll(pattern)) {
	console.log("เจอรูปผิดที่ตำแหน่ง", match.index, "=>", JSON.stringify(match[0]));
}
```

คุณสามารถปรับ regex ให้เข้ากับ engine ของภาษาอื่นๆ ที่รองรับ lookbehind (เช่น C#, Java, ฯลฯ) ตามกติกาของแต่ละภาษาได้

## หมายเหตุ

- กฎเหล่านี้เป็นการประมาณจากกฎไวยากรณ์ไทยพื้นฐาน ไม่ได้ครอบคลุมทุกกรณีในภาษาไทยจริง
- บางคำที่เขียนถูกตามความเป็นจริงอาจถูกมองว่า "ผิด" ตาม regex นี้ และในทางกลับกัน
- แนะนำให้ใช้เป็นตัวช่วยกลั่นกรองเบื้องต้น แล้วให้มนุษย์ตรวจซ้ำอีกชั้นหนึ่ง

