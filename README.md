# Regex ตรวจมาตรฐานการสะกดภาษาไทย

โปรเจกต์เล็กๆ สำหรับรวบรวม Regular Expression ที่ใช้ตรวจรูปคำภาษาไทยขั้นพื้นฐาน (โครงสร้างสระ–วรรณยุกต์–ตัวสะกด) จากกฎไวยากรณ์ไทยเบื้องต้น ไม่ได้เช็กความหมายของคำ แต่ช่วยจับรูปเขียนที่ "ไม่น่าเป็นไปได้" ตามกฎการสะกด

## แนวคิด

อาศัยลักษณะเฉพาะของภาษาไทย เช่น
- สระหน้า (เ แ โ ไ ใ) ต้องมีพยัญชนะตาม
- สระบน/ล่าง ต้องมีพยัญชนะรองรับ
- ไม้หันอากาศ และวรรณยุกต์ ต้องวางตำแหน่งถูกต้อง
- ห้ามมีสระ/วรรณยุกต์/ทัณฑฆาตซ้ำซ้อน
- ลำดับของสระ–วรรณยุกต์ ต้องไม่สลับกัน

แล้วเขียนเป็น regex เพื่อ "จับตำแหน่งที่ผิดรูป" ในสตริงภาษาไทย

## ขอบเขตที่ตรวจได้

จากไฟล์ regex.md จะมี regex ย่อยๆ สำหรับกรณีต่อไปนี้
- ไม้หันอากาศที่ไม่มีพยัญชนะ หรือไม่มีตัวสะกด
- วรรณยุกต์ที่ไม่มีพยัญชนะนำ หรือวางก่อนสระบน/ล่าง
- สระหน้าที่ไม่มีพยัญชนะตาม หรือมีสระอื่นตามทันที
- สระบน/ล่าง/สระอำ ที่ไม่มีพยัญชนะนำหน้า
- การใช้สระะ/า/เอ/เอาะ/โอะ/เออะ/แอะ ที่ไม่มีรูปพยัญชนะรองรับ
- รูปสระเอ/เอีย/เอือ/เออ/เอะ ที่ไม่ครบองค์ประกอบ
- สระอื ที่ไม่มีตัวสะกด
- การใช้สระอำร่วมกับสระอื่น
- สระหน้า/สระบน/สระล่าง/ไม้หันอากาศ/วรรณยุกต์/ทัณฑฆาต ซ้ำซ้อน
- ลำดับวรรณยุกต์มาก่อนสระบน/ล่าง

ส่วนที่เพิ่มเติมในเวอร์ชันพิเศษ (จาก additional.md):
- คำว่า "อย" ที่ไม่ได้นำหน้า "อย่า อยู่ อย่าง อยาก"

## Regex ที่ได้

### เวอร์ชันทั่วไป

ใช้ตรวจการสะกดตามกฎปกติ (ไม่อนุญาตการลากเสียง เช่น อ้าาา)

```regex
[เแโไใ]{2,}|[ิีึืูุั็]{2,}|[่้๊๋]{2,}|[์]{2,}|[่้๊๋][ิีึืุูั็]|[เแโไใ][ิีึืุูั็าะำ]|(?<![ก-ฮ])ั|ั(?![่้๊๋]?[ก-ฮ](?![ะาิีึืุูำั็่้๊๋]))|(?<![ก-ฮ][ิีืึุูั]?)[่้๊๋]|[เแไโใ](?![ก-ฮ])|[ไโใ][ก-ฮ][่้๊๋]?[ิีึืุูำั็า์]|แ[ก-ฮ][่้๊๋]?[ีืึิุูำัา์]|เ[ก-ฮ][่้๊๋]?[ึุูำั์]|แ[ก-ฮ]็(?![ก-ฮ])|(?<![ก-ฮ][่้๊๋]?)[ิีึืุูำำ]|(?<!เ[ก-ฮ]{1,2}[่้๊๋]?[าอ]|[โเแ]?[ก-ฮ]{1,2}[่้๊๋]?)ะ|(?<!เ?[ก-ฮ]{1,2}[่้๊๋]?)า|เ(?![ก-ฮ])|เ[ก-ฮ](?:ี(?![่้๊๋]?ย[ก-ฮ]?)|ื(?![่้๊๋]?อ[ก-ฮ]?))|เ[ก-ฮ]{1,2}(?:ิ(?![่้๊๋]?[ก-ฮ](?![ะาิีึืุูำั็่้๊๋]))|็(?![ก-ฮ](?![ะาิีึืุูำั็่้๊๋])))|[ื](?![่้๊๋]?[ก-ฮ](?![ะาิีึืุูำั็่้๊๋]))|(?:[แเโไใ][ก-ฮ]|[ก-ฮ][ิีึืุูาะ])ำ
```

### เวอร์ชันทั่วไปที่อนุญาตการลากเสียง (เช่น "อ้าาาา")

ต่างจากเวอร์ชันทั่วไปตรงเงื่อนไขของสระอา เพื่อให้ยอมรับการย้ำ "า" ต่อท้ายได้

```regex
[เแโไใ]{2,}|[ิีึืูุั็]{2,}|[่้๊๋]{2,}|[์]{2,}|[่้๊๋][ิีึืุูั็]|[เแโไใ][ิีึืุูั็าะำ]|(?<![ก-ฮ])ั|ั(?![่้๊๋]?[ก-ฮ](?![ะาิีึืุูำั็่้๊๋]))|(?<![ก-ฮ][ิีืึุูั]?)[่้๊๋]|[เแไโใ](?![ก-ฮ])|[ไโใ][ก-ฮ][่้๊๋]?[ิีึืุูำั็า์]|แ[ก-ฮ][่้๊๋]?[ีืึิุูำัา์]|เ[ก-ฮ][่้๊๋]?[ึุูำั์]|แ[ก-ฮ]็(?![ก-ฮ])|(?<![ก-ฮ][่้๊๋]?)[ิีึืุูำำ]|(?<!เ[ก-ฮ]{1,2}[่้๊๋]?[าอ]|[โเแ]?[ก-ฮ]{1,2}[่้๊๋]?)ะ|(?<!เ?[ก-ฮ]{1,2}[่้๊๋]?|า)า|เ(?![ก-ฮ])|เ[ก-ฮ](?:ี(?![่้๊๋]?ย[ก-ฮ]?)|ื(?![่้๊๋]?อ[ก-ฮ]?))|เ[ก-ฮ]{1,2}(?:ิ(?![่้๊๋]?[ก-ฮ](?![ะาิีึืุูำั็่้๊๋]))|็(?![ก-ฮ](?![ะาิีึืุูำั็่้๊๋])))|[ื](?![่้๊๋]?[ก-ฮ](?![ะาิีึืุูำั็่้๊๋]))|(?:[แเโไใ][ก-ฮ]|[ก-ฮ][ิีึืุูาะ])ำ
```


### เวอร์ชันเพิ่มเติม

ใช้ตรวจการสะกดตามกฎปกติ (ไม่อนุญาตการลากเสียง เช่น อ้าาา) และเพิ่มกฎพิเศษ (อย่าอยู่อย่างอยาก)

```regex
[เแโไใ]{2,}|[ิีึืูุั็]{2,}|[่้๊๋]{2,}|[์]{2,}|[่้๊๋][ิีึืุูั็]|[เแโไใ][ิีึืุูั็าะำ]|(?<![ก-ฮ])ั|ั(?![่้๊๋]?[ก-ฮ](?![ะาิีึืุูำั็่้๊๋]))|(?<![ก-ฮ][ิีืึุูั]?)[่้๊๋]|[เแไโใ](?![ก-ฮ])|[ไโใ][ก-ฮ][่้๊๋]?[ิีึืุูำั็า์]|แ[ก-ฮ][่้๊๋]?[ีืึิุูำัา์]|เ[ก-ฮ][่้๊๋]?[ึุูำั์]|แ[ก-ฮ]็(?![ก-ฮ])|(?<![ก-ฮ][่้๊๋]?)[ิีึืุูำำ]|(?<!เ[ก-ฮ]{1,2}[่้๊๋]?[าอ]|[โเแ]?[ก-ฮ]{1,2}[่้๊๋]?)ะ|(?<!เ?[ก-ฮ]{1,2}[่้๊๋]?)า|เ(?![ก-ฮ])|เ[ก-ฮ](?:ี(?![่้๊๋]?ย[ก-ฮ]?)|ื(?![่้๊๋]?อ[ก-ฮ]?))|เ[ก-ฮ]{1,2}(?:ิ(?![่้๊๋]?[ก-ฮ](?![ะาิีึืุูำั็่้๊๋]))|็(?![ก-ฮ](?![ะาิีึืุูำั็่้๊๋])))|[ื](?![่้๊๋]?[ก-ฮ](?![ะาิีึืุูำั็่้๊๋]))|(?:[แเโไใ][ก-ฮ]|[ก-ฮ][ิีึืุูาะ])ำ|(?<![เแไใโ][ก-ฮ]?)[ก-ฮ](?![ิีึืุู])[่้๊๋](?!(?:[ะำา]|[อว][ก-ฮ]?|[ก-ฮ](?![ะาิีึืุูำั็่้๊๋])))|(?<![เแไใโ])(?<!ี[่้๊๋]?)[ก-ฮ]{1,2}[่้๊๋]?[ว](?!(?:[ั]|[่้๊๋]?[ะาำิีึืุู]|[ก-ฮ](?![ะาิีึืุูำั็่้๊๋])))|(?<!(?:(?<![เแไโใ])[ก-ฮ]{1,2}|[ก-ฮ]ื)[่้๊๋]?)อย(?!่า|ู่|าก)
```

### เวอร์ชันเพิ่มเติมที่อนุญาตการลากเสียง (เช่น "อ้าาาา")

ต่างจากเวอร์ชันทั่วไปตรงเงื่อนไขของสระอา เพื่อให้ยอมรับการย้ำ "า" ต่อท้ายได้ และเพิ่มกฎพิเศษ

```regex
[เแโไใ]{2,}|[ิีึืูุั็]{2,}|[่้๊๋]{2,}|[์]{2,}|[่้๊๋][ิีึืุูั็]|[เแโไใ][ิีึืุูั็าะำ]|(?<![ก-ฮ])ั|ั(?![่้๊๋]?[ก-ฮ](?![ะาิีึืุูำั็่้๊๋]))|(?<![ก-ฮ][ิีืึุูั]?)[่้๊๋]|[เแไโใ](?![ก-ฮ])|[ไโใ][ก-ฮ][่้๊๋]?[ิีึืุูำั็า์]|แ[ก-ฮ][่้๊๋]?[ีืึิุูำัา์]|เ[ก-ฮ][่้๊๋]?[ึุูำั์]|แ[ก-ฮ]็(?![ก-ฮ])|(?<![ก-ฮ][่้๊๋]?)[ิีึืุูำำ]|(?<!เ[ก-ฮ]{1,2}[่้๊๋]?[าอ]|[โเแ]?[ก-ฮ]{1,2}[่้๊๋]?)ะ|(?<!เ?[ก-ฮ]{1,2}[่้๊๋]?|า)า|เ(?![ก-ฮ])|เ[ก-ฮ](?:ี(?![่้๊๋]?ย[ก-ฮ]?)|ื(?![่้๊๋]?อ[ก-ฮ]?))|เ[ก-ฮ]{1,2}(?:ิ(?![่้๊๋]?[ก-ฮ](?![ะาิีึืุูำั็่้๊๋]))|็(?![ก-ฮ](?![ะาิีึืุูำั็่้๊๋])))|[ื](?![่้๊๋]?[ก-ฮ](?![ะาิีึืุูำั็่้๊๋]))|(?:[แเโไใ][ก-ฮ]|[ก-ฮ][ิีึืุูาะ])ำ|(?<![เแไใโ][ก-ฮ]?)[ก-ฮ](?![ิีึืุู])[่้๊๋](?!(?:[ะำา]|[อว][ก-ฮ]?|[ก-ฮ](?![ะาิีึืุูำั็่้๊๋])))|(?<![เแไใโ])(?<!ี[่้๊๋]?)[ก-ฮ]{1,2}[่้๊๋]?[ว](?!(?:[ั]|[่้๊๋]?[ะาำิีึืุู]|[ก-ฮ](?![ะาิีึืุูำั็่้๊๋])))|(?<!(?:(?<![เแไโใ])[ก-ฮ]{1,2}|[ก-ฮ]ื)[่้๊๋]?)อย(?!่า|ู่|าก)
```

### เวอร์ชั่นรองรับตัวการันต์
```regex
[เแโไใ]{2,}|[ิีึืูุั็]{2,}|[่้๊๋]{2,}|[์]{2,}|[่้๊๋][ิีึืุูั็]|[เแโไใ][ิีึืุูั็าะำ]|(?<![ก-ฮ][ิ]?)(?:์)|(?<![ก-ฮ])(?:ั)|(?:ั)(?![่้๊๋]?[ก-ฮ](?![ะาิีึืุูำั็่้๊๋์])|[ก-ฮ][ก-ฮ](?:[ิ]?์))|(?<![ก-ฮ][ิีืึุูั]?)[่้๊๋]|[เแไโใ](?![ก-ฮ])|[ไโใ][ก-ฮ][่้๊๋]?[ิีึืุูำั็า์]|แ[ก-ฮ][่้๊๋]?[ีืึิุูำัา์]|เ[ก-ฮ][่้๊๋]?[ึุูำั์]|แ[ก-ฮ]็(?![ก-ฮ](?![ะาิีึืุูำั็่้๊๋์])|[ก-ฮ][ก-ฮ](?:[ิ]?์))|(?<![ก-ฮ][่้๊๋]?)[ิีึืุูำำ]|(?<!เ[ก-ฮ]{1,2}[่้๊๋]?[าอ]|[โเแ]?[ก-ฮ]{1,2}[่้๊๋]?)ะ|(?<!เ?[ก-ฮ]{1,2}[่้๊๋]?)า|เ(?![ก-ฮ])|เ[ก-ฮ](?:ี(?![่้๊๋]?ย[ก-ฮ]?)|ื(?![่้๊๋]?อ[ก-ฮ]?))|เ[ก-ฮ]{1,2}ิ[่้๊๋]?(?:[ก-ฮ]์)?(?![่้๊๋]?[ก-ฮ](?![ะาิีึืุูำั็่้๊๋]))|เ[ก-ฮ]{1,2}็(?![ก-ฮ](?![ะาิีึืุูำั็่้๊๋์])|[ก-ฮ][ก-ฮ]์)|[ื](?![่้๊๋]?[ก-ฮ](?![ะาิีึืุูำั็่้๊๋]))|(?:[แเโไใ][ก-ฮ]|[ก-ฮ][ิีึืุูาะ])ำ|(?<![เแไใโ])(?<!ี[่้๊๋]?)[ก-ฮ]{1,2}[่้๊๋]?[ว](?!(?:[ั]|[่้๊๋]?[ะาำิีึืุู]|[ก-ฮ](?![ะาิีึืุูำั็่้๊๋])))|(?<!(?:(?<![เแไโใ])[ก-ฮ]{1,2}|[ก-ฮ]ื)[่้๊๋]?)อย(?!่า|ู่|าก)
```


### เวอร์ชั่นรองรับตัวการันต์และอนุญาตการใช้เสียงยาว เช่น อาาาา
```regex
[เแโไใ]{2,}|[ิีึืูุั็]{2,}|[่้๊๋]{2,}|[์]{2,}|[่้๊๋][ิีึืุูั็]|[เแโไใ][ิีึืุูั็าะำ]|(?<![ก-ฮ][ิ]?)(?:์)|(?<![ก-ฮ])(?:ั)|(?:ั)(?![่้๊๋]?[ก-ฮ](?![ะาิีึืุูำั็่้๊๋์])|[ก-ฮ][ก-ฮ](?:[ิ]?์))|(?<![ก-ฮ][ิีืึุูั]?)[่้๊๋]|[เแไโใ](?![ก-ฮ])|[ไโใ][ก-ฮ][่้๊๋]?[ิีึืุูำั็า์]|แ[ก-ฮ][่้๊๋]?[ีืึิุูำัา์]|เ[ก-ฮ][่้๊๋]?[ึุูำั์]|แ[ก-ฮ]็(?![ก-ฮ](?![ะาิีึืุูำั็่้๊๋์])|[ก-ฮ][ก-ฮ](?:[ิ]?์))|(?<![ก-ฮ][่้๊๋]?)[ิีึืุูำำ]|(?<!เ[ก-ฮ]{1,2}[่้๊๋]?[าอ]|[โเแ]?[ก-ฮ]{1,2}[่้๊๋]?)ะ|(?<!เ?[ก-ฮ]{1,2}[่้๊๋]?|า)า|เ(?![ก-ฮ])|เ[ก-ฮ](?:ี(?![่้๊๋]?ย[ก-ฮ]?)|ื(?![่้๊๋]?อ[ก-ฮ]?))|เ[ก-ฮ]{1,2}ิ[่้๊๋]?(?:[ก-ฮ]์)?(?![่้๊๋]?[ก-ฮ](?![ะาิีึืุูำั็่้๊๋]))|เ[ก-ฮ]{1,2}็(?![ก-ฮ](?![ะาิีึืุูำั็่้๊๋์])|[ก-ฮ][ก-ฮ]์)|[ื](?![่้๊๋]?[ก-ฮ](?![ะาิีึืุูำั็่้๊๋]))|(?:[แเโไใ][ก-ฮ]|[ก-ฮ][ิีึืุูาะ])ำ|(?<![เแไใโ])(?<!ี[่้๊๋]?)[ก-ฮ]{1,2}[่้๊๋]?[ว](?!(?:[ั]|[่้๊๋]?[ะาำิีึืุู]|[ก-ฮ](?![ะาิีึืุูำั็่้๊๋])))|(?<!(?:(?<![เแไโใ])[ก-ฮ]{1,2}|[ก-ฮ]ื)[่้๊๋]?)อย(?!่า|ู่|าก)
```



## วิธีใช้งาน

แนวทางทั่วไปคือใช้ regex นี้เพื่อ "หา" ตำแหน่งผิดปกติในสตริงภาษาไทย

ตัวอย่าง (แนวคิด) ในภาษา JavaScript:

```js
const pattern = /[เแโไใ]{2,}|[ิีึืูุั็]{2,}|[่้๊๋]{2,}|[์]{2,}|[่้๊๋][ิีึืุูั็]|[เแโไใ][ิีึืุูั็าะำ]|(?<![ก-ฮ])ั|ั(?![่้๊๋]?[ก-ฮ](?![ะำาิีึืุู่้๊๋์]))|(?<![ก-ฮ][ิีืึุูั]?)[่้๊๋]|[เแไโใ](?![ก-ฮ])|[ไโใ][ก-ฮ][่้๊๋]?[ิีึืุูำั็า์]|แ[ก-ฮ][่้๊๋]?[ีืึิุูำัา์]|เ[ก-ฮ][่้๊๋]?[ึุูำั์]|แ[ก-ฮ]็(?![ก-ฮ])|(?<![ก-ฮ][่้๊๋]?)[ิีึืุูำำ]|(?<!เ[ก-ฮ]{1,2}[่้๊๋]?[าอ]|[โเแ]?[ก-ฮ]{1,2}[่้๊๋]?)ะ|(?<!เ?[ก-ฮ]{1,2}[่้๊๋]?)า|เ(?![ก-ฮ])|เ[ก-ฮ]ี(?![่้๊๋]?ย[ก-ฮ]?)|เ[ก-ฮ]{1,2}ื(?![่้๊๋]?อ[ก-ฮ]?)|เ[ก-ฮ]{1,2}ิ(?![่้๊๋]?[ก-ฮ])|เ[ก-ฮ]{1,2}็(?![ก-ฮ])|[ื](?![่้๊๋]?[ก-ฮ])|(?:[แเโไใ][ก-ฮ]|[ก-ฮ][ิีึืุูาะ])ำ/gu;

const text = "กาาแฟร้้อนๆ มีกลิ่ินหอมฟุ้งไปทั่ัวห้อง";

for (const match of text.matchAll(pattern)) {
	console.log("เจอรูปผิดที่ตำแหน่ง", match.index, "=>", JSON.stringify(match[0]));
}
```

คุณสามารถปรับ regex ให้เข้ากับ engine ของภาษาอื่นๆ ที่รองรับ lookbehind (เช่น C#, Java, ฯลฯ) ตามกติกาของแต่ละภาษาได้

## หมายเหตุ

- กฎเหล่านี้เป็นการประมาณจากกฎไวยากรณ์ไทยพื้นฐาน ไม่ได้ครอบคลุมทุกกรณีในภาษาไทยจริง
- บางคำที่เขียนถูกตามความเป็นจริงอาจถูกมองว่า "ผิด" ตาม regex นี้ และในทางกลับกัน
- แนะนำให้ใช้เป็นตัวช่วยกลั่นกรองเบื้องต้น แล้วให้มนุษย์ตรวจซ้ำอีกชั้นหนึ่ง

